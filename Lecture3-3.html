<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3교시: 맵, 인터랙션, HUD (Map & Pickup)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="./styles/lecture.css">
</head>
<body>

    <div class="slider-container">

        <!-- SLIDE 1: Title & Overview -->
        <div class="slide active">
            <div class="grid-2">
                <div class="col-left">
                    <h2 style="color: #7ee787; font-size: 1.3rem; margin-bottom: 8px;">3교시</h2>
                    <h1 class="main-title">맵 추가 · 오브젝트 인터랙션 · HUD</h1>
                    <p style="margin-bottom: 20px; font-size:1.1rem;">메인 씬에 맵을 배치하고, 상호작용 가능한 아이템을 만들어 플레이어가 습득하면 포인트가 증가하도록 구현합니다. Autoload로 점수 관리하고 HUD에 표시합니다.</p>
                    <div style="background: #161b22; padding: 18px; border-radius: 10px; border: 1px solid #30363d; color:#c9d1d9;">
                        <h3 style="color:#a5d6ff; margin-bottom:12px;"><i class="fa-solid fa-map"></i> 세부 학습 항목</h3>
                        <ul style="list-style:none; padding-left:6px;">
                            <li style="margin-bottom:8px;">맵(TileMap / TileSet) 배치</li>
                            <li style="margin-bottom:8px;">인터랙션 가능한 아이템(Area2D + CollisionShape2D)</li>
                            <li style="margin-bottom:8px;">플레이어 RayCast로 습득(스페이스 입력)</li>
                            <li>Autoload(singleton)으로 점수 관리 + HUD로 점수 표시</li>
                        </ul>
                    </div>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <div class="placeholder-text"><i class="fa-solid fa-box-open" style="font-size:2rem;color:#7ee787;"></i><p style="margin-top:8px;color:#8b949e;">맵 · 아이템 · HUD 예시</p></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 2: Add Map to Main Scene -->
        <div class="slide">
            <h1 class="main-title">맵 추가 (TileMap)</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">Main 씬에 TileMap 배치하기</h2>
                    <p style="margin-bottom:10px;">TileSet을 준비한 뒤 `TileMap` 노드를 추가하고, 맵을 그립니다. 충돌 레이어를 TileSet에서 설정하세요.</p>
                    <div style="background:#161b22;padding:16px;border-radius:8px;border:1px solid #30363d;color:#c9d1d9;">
                        <ol style="padding-left:18px;line-height:1.7;">
                            <li>루트 노드(예: Main) 아래에 <code>TileMap</code> 추가</li>
                            <li>TileSet 에디터에서 충돌 레이어(Collision)를 설정</li>
                            <li>맵을 타일로 채워 플레이어가 이동 가능한 지형을 만든다</li>
                        </ol>
                    </div>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">TileMap / TileSet 스크린샷 자리</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: Interactive Item (Area2D) -->
        <div class="slide">
            <h1 class="main-title">인터랙션 아이템 만들기</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">Area2D로 아이템 제작</h2>
                    <p style="margin-bottom:10px;">아이템은 `Area2D` + `CollisionShape2D` + Sprite로 구성합니다. 신호(`body_entered`) 또는 코드로 습득 처리를 합니다.</p>
                    <div class="code-block">
<pre><code>extends Area2D

@onready var sprite = $Sprite2D

func _ready():
	connect("body_entered", Callable(self, "_on_body_entered"))

func _on_body_entered(body):
	if body.name == "Player":
		# 플레이어가 닿으면 아이템 비활성화 및 점수 보상
		queue_free()  # 또는 hide()
		Score.add_points(10)
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">참고: `Score`는 Autoload(singleton)라고 가정합니다.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">아이템 노드 구조: Area2D → CollisionShape2D, Sprite2D</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 4: Player RayCast and Pickup -->
        <div class="slide">
            <h1 class="main-title">플레이어 RayCast로 습득</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">RayCast2D 사용 (스페이스로 상호작용)</h2>
                    <p style="margin-bottom:10px;">플레이어에 `RayCast2D`를 추가하고, 스페이스 키 입력 시 RayCast가 닿은 Area2D를 검사하여 습득합니다.</p>
                    <div class="code-block">
<pre><code>extends CharacterBody2D

@onready var ray = $RayCast2D

func _input(event):
	if event.is_action_pressed("ui_accept"):
		if ray.is_colliding():
			var collider = ray.get_collider()
			if collider is Area2D:
				# 아이템 습득
				collider.queue_free()
				Score.add_points(10)
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">RayCast는 플레이어 앞쪽으로 향하게 설정하고 레이어/마스크를 조정하세요.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">RayCast 방향/길이 예시</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 5: Autoload (Score singleton) -->
        <div class="slide">
            <h1 class="main-title">Autoload로 점수 관리</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">Score singleton 만들기</h2>
                    <p style="margin-bottom:10px;">`Score.gd`를 만들어 Autoload로 등록하면 씬 간에 점수 공유가 편합니다.</p>
                    <div class="code-block">
<pre><code>extends Node

var points: int = 0

func add_points(v: int) -> void:
	points += v
	print("Score:", points)

func reset() -> void:
	points = 0
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">프로젝트 설정 → Autoload에서 `Score.gd`를 추가하고 이름을 `Score`로 설정하세요.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">Autoload 등록 화면</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 6: HUD - Display Score -->
        <div class="slide">
            <h1 class="main-title">HUD에 점수 표시</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">CanvasLayer에 Label 추가</h2>
                    <p style="margin-bottom:10px;">`CanvasLayer` 위에 `Label`을 올리고 Autoload `Score`를 폴링하여 텍스트를 갱신합니다.</p>
                    <div class="code-block">
<pre><code>extends CanvasLayer

@onready var score_label = $Label

func _process(_delta):
	score_label.text = str(Score.points)
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">더 나은 구조: 신호를 사용해 점수 변경 시만 갱신하도록 최적화할 수 있습니다.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">HUD 레이아웃 예시</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- NAVIGATION -->
        <div class="nav-bar">
            <div class="page-indicator">Page <span id="current-page">1</span> / 6</div>
            <div class="nav-buttons">
                <button class="nav-btn" id="prev-btn" onclick="changeSlide(-1)" disabled>
                    <i class="fa-solid fa-chevron-left"></i> 이전
                </button>
                <button class="nav-btn" id="next-btn" onclick="changeSlide(1)">
                    다음 <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        </div>

    </div>

    <script>
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const pageIndicator = document.getElementById('current-page');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        function changeSlide(direction) {
            slides[currentSlideIndex].classList.remove('active');
            currentSlideIndex += direction;
            if (currentSlideIndex < 0) currentSlideIndex = 0;
            if (currentSlideIndex >= totalSlides) currentSlideIndex = totalSlides - 1;
            slides[currentSlideIndex].classList.add('active');
            pageIndicator.innerText = currentSlideIndex + 1;
            prevBtn.disabled = (currentSlideIndex === 0);
            nextBtn.disabled = (currentSlideIndex === totalSlides - 1);
        }
    </script>
</body>
</html>
