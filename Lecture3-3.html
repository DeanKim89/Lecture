<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3교시: 맵, 인터랙션, HUD (Map & Pickup)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="./styles/lecture.css">
</head>
<body>

    <div class="slider-container">

        <!-- SLIDE 1: Title & Overview -->
        <div class="slide active">
            <div class="grid-2">
                <div class="col-left">
                    <h2 style="color: #7ee787; font-size: 1.3rem; margin-bottom: 8px;">3교시</h2>
                    <h1 class="main-title">맵 추가 · 오브젝트 인터랙션 · HUD</h1>
                    <p style="margin-bottom: 20px; font-size:1.1rem;">메인 씬에 맵을 배치하고, 상호작용 가능한 아이템을 만들어 플레이어가 습득하면 포인트가 증가하도록 구현합니다. Autoload로 점수 관리하고 HUD에 표시합니다.</p>
                    <div style="background: #161b22; padding: 18px; border-radius: 10px; border: 1px solid #30363d; color:#c9d1d9;">
                        <h3 style="color:#a5d6ff; margin-bottom:12px;"><i class="fa-solid fa-map"></i> 세부 학습 항목</h3>
                        <ul style="list-style:none; padding-left:6px;">
                            <li style="margin-bottom:8px;">맵(TileMap / TileSet) 배치</li>
                            <li style="margin-bottom:8px;">인터랙션 가능한 아이템(Area2D + CollisionShape2D)</li>
                            <li style="margin-bottom:8px;">플레이어 RayCast로 습득(스페이스 입력)</li>
                            <li>Autoload(singleton)으로 점수 관리 + HUD로 점수 표시</li>
                        </ul>
                    </div>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <img src="Img_lecture3-5.png" alt="3교시 개요 이미지">
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 2: Inspect Provided Map & Layers -->
        <div class="slide">
            <h1 class="main-title">제공된 맵 씬과 레이어 구조</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">맵은 여러 TileMap 레이어의 합입니다</h2>
                    <p style="margin-bottom:10px;">이번 수업에는 이미 만들어진 맵 씬이 제공됩니다. 이 맵은 하나의 그림이 아니라 여러 TileMap 레이어를 겹쳐 구성되어 있습니다. 각 레이어는 역할이 다릅니다.</p>
                    <div style="background:#161b22;padding:16px;border-radius:8px;border:1px solid #30363d;color:#c9d1d9;">
                        <ol style="padding-left:18px;line-height:1.7;">
                            <li><strong>Floor(바닥) 레이어</strong>: 플레이어가 걸어다니는 기본 타일을 포함합니다.</li>
                            <li><strong>Wall(벽) 레이어</strong>: 충돌이 필요한 타일을 포함 — 이 레이어에 충돌(Collision)을 설정해 플레이어가 통과하지 못하도록 합니다.</li>
                            <li><strong>Object/Decoration 레이어</strong>: 시각적 장식이나 인터랙션 요소(예: 책상, 화분)를 올립니다; 보통 충돌 없거나 별도 레이어로 처리합니다.</li>
                            <li><strong>Door/Trigger 레이어</strong>: 문이나 문구간 같은 상호작용 가능한 타일을 놓습니다 — 문은 열림/닫힘 로직과 연계될 수 있습니다.</li>
                        </ol>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">중요: 레이어의 순서(Z-order)가 시각과 충돌에 영향을 줍니다. 예를 들어 Decoration은 플레이어 위에 보이도록 위쪽에 두고, 충돌 레이어는 별도로 관리하세요.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <img src="Img_lecture3-6.png" alt="3교시 개요 이미지">
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: Interactive Item (StaticBody2D to avoid overlap) -->
        <div class="slide">
            <h1 class="main-title">인터랙션 아이템 만들기 (중복 방지)</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">`StaticBody2D`로 아이템 제작 (겹치지 않도록)</h2>
                    <p style="margin-bottom:10px;">아이템은 충돌로 인해 다른 아이템과 겹치면 안 되므로 `StaticBody2D`를 사용합니다. Sprite는 Region을 사용해 스프라이트 시트에서 프레임을 선택하고, `CollisionShape2D`는 Rectangle으로 설정해 타일/아이템 크기와 맞춥니다.</p>
                    <div class="code-block">
<pre><code># 노드 구조 (예)
StaticBody2D
├─ Sprite2D        # Texture 할당, Inspector에서 Region 켬 → Region Rect로 프레임 선택
├─ CollisionShape2D # Shape: Rectangle -> 크기를 아이템 크기에 맞춤
└─ (Optional) Area2D for signals (if you prefer event-driven pickup)
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">설정 팁: Sprite2D에서 <em>Region</em>을 켜고 드래그로 프레임 영역을 지정하세요. `CollisionShape2D`의 Rectangle은 스프라이트 투명 부분을 제외한 실제 보이는 영역에 맞춰 조정합니다.</p>
                    <p style="margin-top:8px;color:#8b949e;">주의: 픽업 처리는 플레이어의 RayCast 또는 별도의 입력 처리(스페이스)를 통해 검사합니다 — 슬라이드 4에서 설명합니다.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <img src="Img_lecture3-7.png" alt="3교시 개요 이미지">
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 4: Player RayCast and Pickup -->
        <div class="slide">
            <h1 class="main-title">플레이어 RayCast로 습득</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">RayCast2D 사용 (스페이스로 상호작용)</h2>
                    <p style="margin-bottom:10px;">플레이어에 `RayCast2D`를 추가하고, 스페이스 키 입력 시 RayCast가 닿은 Area2D를 검사하여 습득합니다.</p>
                    <div class="code-block">
<pre><code>extends CharacterBody2D

@onready var ray = $RayCast2D

func _input(event):
	if Input.is_action_just_pressed("interact"):
		if ray.is_colliding():
			var target = ray.get_collider()
			if target.is_in_group("interactable"):
				if target.has_method("interact"):
					target.interact()
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">RayCast는 플레이어 앞쪽으로 향하게 설정하고 레이어/마스크를 조정하세요.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">RayCast 방향/길이 예시</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 5: Autoload (Score singleton) -->
        <div class="slide">
            <h1 class="main-title">Autoload로 점수 관리</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">Score singleton 만들기</h2>
                    <p style="margin-bottom:10px;">`Score.gd`를 만들어 Autoload로 등록하면 씬 간에 점수 공유가 편합니다.</p>
                    <div class="code-block">
<pre><code>extends Node

var points: int = 0

func add_points(v: int) -> void:
	points += v
	print("Score:", points)

func reset() -> void:
	points = 0
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">프로젝트 설정 → Autoload에서 `Score.gd`를 추가하고 이름을 `Score`로 설정하세요.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">Autoload 등록 화면</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 6: HUD - Display Score -->
        <div class="slide">
            <h1 class="main-title">HUD에 점수 표시</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">CanvasLayer에 Label 추가</h2>
                    <p style="margin-bottom:10px;">`CanvasLayer` 위에 `Label`을 올리고 Autoload `Score`를 폴링하여 텍스트를 갱신합니다.</p>
                    <div class="code-block">
<pre><code>extends CanvasLayer

@onready var score_label = $Label

func _process(_delta):
	score_label.text = str(Score.points)
</code></pre>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">더 나은 구조: 신호를 사용해 점수 변경 시만 갱신하도록 최적화할 수 있습니다.</p>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <p style="color:#8b949e;">HUD 레이아웃 예시</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- NAVIGATION -->
        <div class="nav-bar">
            <div class="page-indicator">Page <span id="current-page">1</span> / 6</div>
            <div class="nav-buttons">
                <button class="nav-btn" id="prev-btn" onclick="changeSlide(-1)" disabled>
                    <i class="fa-solid fa-chevron-left"></i> 이전
                </button>
                <button class="nav-btn" id="next-btn" onclick="changeSlide(1)">
                    다음 <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        </div>

    </div>

    <script>
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const pageIndicator = document.getElementById('current-page');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        function changeSlide(direction) {
            slides[currentSlideIndex].classList.remove('active');
            currentSlideIndex += direction;
            if (currentSlideIndex < 0) currentSlideIndex = 0;
            if (currentSlideIndex >= totalSlides) currentSlideIndex = totalSlides - 1;
            slides[currentSlideIndex].classList.add('active');
            pageIndicator.innerText = currentSlideIndex + 1;
            prevBtn.disabled = (currentSlideIndex === 0);
            nextBtn.disabled = (currentSlideIndex === totalSlides - 1);
        }
    </script>
</body>
</html>
