<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2교시: 주인공 만들기 (Player Scene)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="./styles/lecture.css">
</head>
<body>

    <div class="slider-container">

        <!-- SLIDE 1: Title & Overview -->
        <div class="slide active">
            <div class="grid-2">
                <div class="col-left">
                    <h2 style="color: #7ee787; font-size: 1.5rem; margin-bottom: 10px;">2교시</h2>
                    <h1 class="main-title">주인공 만들기 (Player Scene)</h1>
                    <p style="margin-bottom: 30px; font-size: 1.2rem;">
                        플레이어 캐릭터를 생성하고, 키보드로 자유롭게 움직이도록 만들어 봅시다.
                    </p>
                    
                    <div style="background: #161b22; padding: 25px; border-radius: 12px; border: 1px solid #30363d;">
                        <h3 style="color: #a5d6ff; margin-bottom: 15px;"><i class="fa-solid fa-bullseye"></i> 학습 목표</h3>
                        <ul style="list-style: none; padding-left: 10px;">
                            <li style="margin-bottom: 10px;"><i class="fa-solid fa-check" style="color:#7ee787; margin-right:10px;"></i> <strong>CharacterBody2D</strong> 노드 이해하기</li>
                            <li style="margin-bottom: 10px;"><i class="fa-solid fa-check" style="color:#7ee787; margin-right:10px;"></i> <strong>Input.get_vector</strong>로 부드러운 이동 구현</li>
                            <li><i class="fa-solid fa-check" style="color:#7ee787; margin-right:10px;"></i> <strong>애니메이션</strong>을 방향에 맞춰 재생하기</li>
                        </ul>
                    </div>
                </div>
                <div class="col-right">
                    <div class="image-container">
                        <img src="./Img_lecture3-3.png" alt="Player Result">
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 2: Scene Structure -->
        <div class="slide">
            <h1 class="main-title">씬 구조 (Scene Structure)</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">Player 씬 구성하기</h2>
                    <p style="margin-bottom: 20px;">
                        플레이어는 물리 법칙(충돌, 이동)이 필요하므로 <span class="highlight">CharacterBody2D</span>를 루트로 사용합니다.
                    </p>
                    <div class="tree-view">
                        <div class="tree-item indent-1">
                            <span class="tree-icon"><i class="fa-solid fa-person"></i></span>
                            <strong style="color: #ff7b72;">CharacterBody2D</strong> (Root / Player)
                        </div>
                        <div class="tree-item indent-2">
                            <span class="tree-icon"><i class="fa-solid fa-image"></i></span>
                            <span>Sprite2D (이미지 표시)</span>
                        </div>
                        <div class="tree-item indent-2">
                            <span class="tree-icon"><i class="fa-solid fa-shapes"></i></span>
                            <span>CollisionShape2D (충돌 영역)</span>
                        </div>
                        <div class="tree-item indent-2">
                            <span class="tree-icon"><i class="fa-solid fa-clapperboard"></i></span>
                            <span>AnimationPlayer (동작 제어)</span>
                        </div>
                        <div class="tree-item indent-2">
                            <span class="tree-icon"><i class="fa-solid fa-rss"></i></span>
                            <span style="color: #8b949e;">RayCast2D (상호작용용)</span>
                        </div>
                    </div>
                </div>
                <div class="col-right">
                     <!-- 씬 트리 이미지가 들어갈 공간 (placeholder 유지) -->
                    <div class="image-container">
                        <div class="placeholder-text">
                            <i class="fa-solid fa-sitemap"></i>
                            <p style="font-size: 0.9rem;">CharacterBody2D 및 자식 노드 구성</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: Sprite2D 추가 (새 슬라이드) -->
        <div class="slide">
            <h1 class="main-title">Sprite2D 추가 및 설정</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">Sprite2D를 추가하고 텍스처/프레임 설정하기</h2>
                    <p style="margin-bottom: 12px;">다음 세 단계로 Sprite2D를 추가하고 애니메이션 스프라이트 시트를 설정합니다.</p>
                    <div style="background:#161b22;padding:18px;border-radius:8px;border:1px solid #30363d;color:#c9d1d9;">
                        <ol style="padding-left:18px;line-height:1.8;">
                            <li><strong>자식 노드 생성:</strong> Player 씬의 루트(CharacterBody2D)에 <code>Sprite2D</code> 노드를 추가합니다.</li>
                            <li><strong>Texture 설정:</strong> 에디터의 Sprite2D -> <em>Texture</em> 슬롯에 <code>skeleton.png</code> 파일을 드래그 앤 드롭합니다.</li>
                            <li><strong>프레임 설정:</strong> Sprite의 <em>Hframes</em>를 <code>4</code>, <em>Vframes</em>를 <code>12</code>로 설정하여 스프라이트 시트를 분할합니다.</li>
                        </ol>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">참고: Hframes × Vframes = 전체 프레임 수입니다. 에디터에서 프레임을 미리보기로 확인하세요.</p>
                </div>
                <div class="col-right">
                    <div class="image-container" style="flex-direction:column;padding:20px;align-items:flex-start;">
                        <p style="color:#c9d1d9;margin-bottom:12px;"><strong>Quick tip</strong></p>
                        <ul style="color:#c9d1d9;">
                            <li>Sprite2D의 <em>Region</em> 기능을 켜면 개별 프레임을 직접 선택해서 사용하기 편리합니다.</li>
                            <li>애니메이션은 <code>AnimationPlayer</code> 또는 <code>AnimatedSprite2D</code>로 재생할 수 있습니다.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- 기존 슬라이드(이전 3 → 이제 4) 계속 이어짐 -->

        <!-- SLIDE 4: AnimationPlayer 추가 및 애니메이션 설정 -->
        <div class="slide">
            <h1 class="main-title">AnimationPlayer 추가 및 애니메이션 설정</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">AnimationPlayer로 Idle 애니메이션 만들기</h2>
                    <p style="margin-bottom:12px;">다음 단계로 AnimationPlayer를 추가하고 <code>idle_down</code> 애니메이션을 만듭니다.</p>
                    <div style="background:#161b22;padding:18px;border-radius:8px;border:1px solid #30363d;color:#c9d1d9;">
                        <ol style="padding-left:18px;line-height:1.8;">
                            <li><strong>자식 노드 추가:</strong> Player 씬의 루트에 <code>AnimationPlayer</code> 노드를 추가합니다.</li>
                            <li><strong>애니메이션 추가:</strong> AnimationPlayer에서 새 애니메이션을 만들고 이름을 <code>idle_down</code>으로 설정합니다.</li>
                            <li><strong>트랙 추가:</strong> 새 애니메이션에 트랙을 추가 → <em>Type</em>은 <code>Property Track</code>, Target은 <code>Sprite2D</code> 노드, Property는 <code>frame</code>으로 선택합니다.</li>
                            <li><strong>길이 & 루프:</strong> 애니메이션 길이를 <code>0.4</code>초로 설정하고 <em>Loop</em>을 켭니다.</li>
                            <li><strong>키프레임 추가:</strong> 0.0, 0.1, 0.2, 0.3 초에 각각 키를 추가하고 <code>frame</code> 값을 (예) <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>로 설정합니다.</li>
                        </ol>
                    </div>
                    <p style="margin-top:10px;color:#8b949e;">참고: 프레임 값은 Sprite의 Hframes/Vframes 설정에 따라 실제 인덱스를 맞춰 사용하세요.</p>
                </div>
                <div class="col-right">
                    <div class="image-container" style="flex-direction:column;padding:20px;align-items:flex-start;">
                        <img src="./Img_lecture3-4.png" alt="Player Result">
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 5: Script - Setup & Movement (이전 4 → 이제 5) -->
        <div class="slide">
            <h1 class="main-title">스크립트: 설정 및 이동 (Movement)</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">변수 선언과 이동 로직</h2>
                    <p style="margin-bottom: 15px;">
                        최신 GDScript 문법(@export, @onready)을 사용해 변수를 선언하고 이동을 구현합니다.
                    </p>
                    <div class="code-block">
<pre><code>extends CharacterBody2D

@export var speed = 100
@onready var anim = $AnimationPlayer

func _physics_process(delta: float) -> void:
    # 1. 입력 방향 벡터 구하기
    var direction = Input.get_vector("move_left", "move_right", "move_up", "move_down")
    
    # 2. 이동 적용
    velocity = direction * speed
    move_and_slide()
</code></pre>
                    </div>
                </div>
                <div class="col-right">
                    <div class="image-container" style="background: #1c2128;">
                        <div style="text-align: center;">
                            <i class="fa-solid fa-code" style="font-size: 3rem; color: #7ee787; margin-bottom: 20px;"></i>
                            <h3 style="color: #fff; margin-bottom: 15px;">코드 포인트</h3>
                            <ul style="text-align: left; display: inline-block; color: #c9d1d9; font-size: 1rem;">
                                <li style="margin-bottom: 10px;"><strong>@export</strong>: 인스펙터 창에서 값 수정 가능</li>
                                <li style="margin-bottom: 10px;"><strong>@onready</strong>: 노드가 준비된 후 참조</li>
                                <li><strong>Input.get_vector</strong>: 대각선 이동 시 속도 보정</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 4: Script - Animation Logic -->
        <div class="slide">
            <h1 class="main-title">스크립트: 애니메이션 로직</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">방향 체크 및 애니메이션 재생</h2>
                    <p style="margin-bottom: 10px;">
                        이동 중일 때와 멈췄을 때를 구분하여 처리합니다.
                    </p>
                    <div class="code-block">
<pre><code>if direction != Vector2.ZERO:
    # 움직이는 중일 때 방향 체크
    if direction.x > 0:
        anim.play("walk_right") # 오른쪽
    elif direction.x < 0:
        anim.play("walk_left")  # 왼쪽
    elif direction.y > 0:
        anim.play("walk_down")  # 아래 (Y+)
    elif direction.y < 0:
        anim.play("walk_up")    # 위 (Y-)
    
else:
    anim.stop()
</code></pre>
                    </div>
                </div>
                <div class="col-right">
                    <!-- Coordinate System Visual -->
                    <div class="image-container" style="flex-direction: column;">
                        <div class="placeholder-text" style="margin-bottom: 20px;">
                            <i class="fa-solid fa-arrows-up-down-left-right" style="color: #a5d6ff;"></i>
                        </div>
                        <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; text-align: center;">
                            <p style="margin-bottom: 10px; color: #fff;"><strong>로직 설명</strong></p>
                            <p style="color: #c9d1d9; font-size: 1rem; line-height: 1.6;">
                                키 입력이 있으면(<span class="highlight">!= ZERO</span>)<br>
                                해당 방향 애니메이션을 재생하고<br>
                                <span class="highlight">lastDirection</span>을 저장합니다.<br>
                                <br>
                                키 입력이 없으면(<span class="highlight">else</span>)<br>
                                애니메이션을 정지합니다.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 5: Idle Animation (lastDirection 기반) -->
        <div class="slide">
            <h1 class="main-title">스크립트: 대기(Idle) 애니메이션</h1>
            <div class="grid-2">
                <div class="col-left">
                    <h2 class="slide-title">마지막 이동 방향 기반으로 Idle 재생</h2>
                    <p style="margin-bottom: 10px;">
                        마지막 이동 방향을 저장한 `lastDirection` 변수를 사용해 대기 애니메이션을 선택합니다.
                    </p>
                    <div class="code-block">
<pre><code># 스크립트 상단에 추가
var lastDirection = Vector2.DOWN

if direction != Vector2.ZERO:
    # 이동 로직...
    lastDirection = direction  # 마지막 이동 방향 저장
else:
    if lastDirection.x > 0:
        anim.play("idle_right") # 오른쪽
    elif lastDirection.x < 0:
        anim.play("idle_left")  # 왼쪽
    elif lastDirection.y > 0:
        anim.play("idle_down")  # 아래
    elif lastDirection.y < 0:
        anim.play("idle_up")
</code></pre>
                    </div>
                </div>
                <div class="col-right">
                    <div class="image-container" style="background: #1c2128; align-items: start; padding: 20px;">
                        <p style="color: #c9d1d9;">마지막 방향을 활용하면 멈춤 상태에서도 캐릭터가 자연스럽게 바라보는 방향을 유지합니다.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- NAVIGATION -->
        <div class="nav-bar">
            <div style="color: #8b949e; font-family: 'JetBrains Mono';">
                Page <span id="current-page">1</span> / 7
            </div>
            <div style="display: flex; gap: 15px;">
                <button class="nav-btn" id="prev-btn" onclick="changeSlide(-1)" disabled>
                    <i class="fa-solid fa-chevron-left"></i> 이전
                </button>
                <button class="nav-btn" id="next-btn" onclick="changeSlide(1)">
                    다음 <i class="fa-solid fa-chevron-right"></i>
                </button>
            </div>
        </div>

    </div>

    <script>
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const pageIndicator = document.getElementById('current-page');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        function changeSlide(direction) {
            slides[currentSlideIndex].classList.remove('active');
            currentSlideIndex += direction;
            
            if (currentSlideIndex < 0) currentSlideIndex = 0;
            if (currentSlideIndex >= totalSlides) currentSlideIndex = totalSlides - 1;

            slides[currentSlideIndex].classList.add('active');
            
            // Update UI
            pageIndicator.innerText = currentSlideIndex + 1;
            prevBtn.disabled = (currentSlideIndex === 0);
            nextBtn.disabled = (currentSlideIndex === totalSlides - 1);
        }
    </script>
</body>
</html>